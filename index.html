<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯†ç ç”Ÿæˆå™¨ - å®‰å…¨æœ¬åœ°å¯†ç ç®¡ç†</title>
    <meta name="description" content="æ ¹æ®ä¸»å¯†ç å’Œç½‘ç«™ä¿¡æ¯ç”Ÿæˆå”¯ä¸€å¯†ç ï¼Œå®Œå…¨æœ¬åœ°è¿è¡Œ">
    <meta name="theme-color" content="#4361ee">
    <link rel="manifest" href="manifest.json">
    <style>
        :root {
            /* å…¬å…±å˜é‡ */
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --secondary: #7209b7;
            --success: #4cc9f0;
            --warning: #f8961e;
            --danger: #e63946;
            --border-radius: 12px;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
            
            /* æµ…è‰²æ¨¡å¼å˜é‡ */
            /*--bg-gradient-light: linear-gradient(135deg, #f5f7fa, #e4edf9, #f5f7fa);*/
            --bg-gradient-light: linear-gradient(135deg, #e6d694, #4ee1e1, #e6d694);
            --card-bg-light: rgba(255, 255, 255, 0.5);
            --text-color-light: #2d3748;
            --border-light: #e2e8f0e6;
            --shadow-light: 0 4px 6px rgba(0, 0, 0, 0.05);
            --input-bg-light: rgba(255, 255, 255, 0.6);
            
            /* æ·±è‰²æ¨¡å¼å˜é‡ */
            --bg-gradient-dark: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
            --card-bg-dark: rgba(25, 25, 35, 0.5);
            --text-color-dark: #f8f9fa;
            --border-dark: rgba(255, 255, 255, 0.1);
            --shadow-dark: 0 4px 6px rgba(0, 0, 0, 0.1);
            --input-bg-dark: rgba(20, 20, 30, 0.5);
            
            /* é»˜è®¤ä½¿ç”¨æ·±è‰²æ¨¡å¼ */
            --bg-gradient: var(--bg-gradient-dark);
            --card-bg: var(--card-bg-dark);
            --text-color: var(--text-color-dark);
            --border: var(--border-dark);
            --input-bg: var(--input-bg-dark);
            
            /* é«˜æ–¯æ¨¡ç³Šæ•ˆæœ */
            --blur-amount: 8px;
        }

        .light-mode {
            --bg-gradient: var(--bg-gradient-light);
            --card-bg: var(--card-bg-light);
            --text-color: var(--text-color-light);
            --border: var(--border-light);
            --input-bg: var(--input-bg-light);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }
        
        body {
            background: var(--bg-gradient);
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2rem 1rem;
            transition: var(--transition);
        }
        
        .container {
            width: 100%;
            max-width: 800px;
            background: var(--card-bg);
            backdrop-filter: blur(var(--blur-amount));
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            margin-top: 1rem;
            border: 1px solid var(--border);
            transition: var(--transition);
        }
        
        header {
            background: rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            text-align: center;
            border-bottom: 1px solid var(--border);
            position: relative;
            transition: var(--transition);
        }
        
        .install-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
            cursor: pointer;
            display: none;
            transition: var(--transition);
        }
        
        h1 {
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
            background: linear-gradient(90deg, #4cc9f0, #4361ee, #7209b7);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: 700;
        }
        
        .subtitle {
            color: var(--text-color);
            opacity: 0.8;
            font-size: 1rem;
            transition: var(--transition);
        }
        
        .main-content {
            padding: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }
        
        .card-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.25rem;
            color: var(--primary);
            font-size: 1.25rem;
            font-weight: 600;
            transition: var(--transition);
        }
        
        .card-title svg {
            width: 24px;
            height: 24px;
            fill: currentColor;
        }
        
        .form-group {
            margin-bottom: 1.25rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-color);
            opacity: 0.9;
            transition: var(--transition);
        }
        
        input, select {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid var(--border);
            background: var(--input-bg);
            color: var(--text-color);
            border-radius: 8px;
            font-size: 1rem;
            transition: var(--transition);
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.3);
        }
        
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: rgba(0, 0, 0, 0.1);
            color: var(--text-color);
        }
        
        .btn-secondary:hover {
            background: rgba(0, 0, 0, 0.2);
        }
        
        .btn-warning {
            background: var(--warning);
            color: white;
        }
        
        .btn-icon {
            width: 36px;
            height: 36px;
            padding: 0;
            border-radius: 50%;
        }
        
        .flex-group {
            display: flex;
            gap: 1rem;
        }
        
        .flex-group > * {
            flex: 1;
        }
        
        .password-result {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            padding: 1rem;
            display: flex;
            align-items: center;
            margin-top: 1rem;
            transition: var(--transition);
        }
        
        .password-display {
            flex: 1;
            font-family: monospace;
            font-size: 1.1rem;
            letter-spacing: 1px;
            overflow: hidden;
            text-overflow: ellipsis;
            color: var(--text-color);
        }
        
        .password-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .strength-meter {
            height: 6px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 3px;
            margin-top: 0.5rem;
            overflow: hidden;
        }
        
        .strength-fill {
            height: 100%;
            width: 0%;
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        
        .tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }
        
        .tab {
            padding: 0.75rem 1.5rem;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .tab.active {
            background: var(--primary);
            color: white;
            font-weight: 600;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .mapping-item {
            display: flex;
            align-items: center;
            padding: 0.75rem;
            background: rgba(0, 0, 0, 0.05);
            border-radius: 8px;
            margin-bottom: 0.75rem;
            transition: var(--transition);
        }
        
        .mapping-domain {
            flex: 1;
            font-family: monospace;
            color: var(--text-color);
        }
        
        .mapping-identifier {
            font-weight: 500;
            margin: 0 1rem;
            color: var(--text-color);
        }
        
        .alert {
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid var(--border);
            transition: var(--transition);
        }
        
        .alert-success {
            background: rgba(76, 201, 240, 0.15);
            border: 1px solid rgba(76, 201, 240, 0.3);
        }
        
        .alert-warning {
            background: rgba(248, 150, 30, 0.15);
            border: 1px solid rgba(248, 150, 30, 0.3);
        }
        
        .instructions {
            margin-top: 2rem;
            max-width: 800px;
            background: var(--card-bg);
            backdrop-filter: blur(5px);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            transition: var(--transition);
        }
        
        .instructions h2 {
            margin-bottom: 1rem;
            color: var(--primary);
        }
        
        .instructions ol {
            padding-left: 1.5rem;
            line-height: 1.6;
            color: var(--text-color);
        }
        
        .instructions li {
            margin-bottom: 0.75rem;
        }
        
        .instructions code {
            background: rgba(0, 0, 0, 0.1);
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: monospace;
        }
        
        .theme-toggle {
            position: absolute;
            top: 1rem;
            right: 5rem;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .theme-toggle:hover {
            background: var(--primary-dark);
            transform: rotate(20deg);
        }
        
        .theme-toggle svg {
            width: 24px;
            height: 24px;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 1rem;
            }
            
            .main-content {
                padding: 1rem;
            }
            
            .flex-group {
                flex-direction: column;
                gap: 1rem;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .theme-toggle {
                right: 4.5rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>å¯†ç ç”Ÿæˆå™¨</h1>
        <div class="subtitle">æ ¹æ®ä¸»å¯†ç å’Œç½‘ç«™ä¿¡æ¯ç”Ÿæˆå”¯ä¸€å¯†ç  - å®Œå…¨æœ¬åœ°è¿è¡Œ</div>
        <button id="install-btn" class="install-btn">å®‰è£…åº”ç”¨</button>
        <button id="theme-toggle" class="theme-toggle">
            <svg id="theme-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="5"></circle>
                <line x1="12" y1="1" x2="12" y2="3"></line>
                <line x1="12" y1="21" x2="12" y2="23"></line>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                <line x1="1" y1="12" x2="3" y2="12"></line>
                <line x1="21" y1="12" x2="23" y2="12"></line>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
        </button>
    </header>
    
    <div class="container">
        <div class="tabs">
            <div class="tab active" data-tab="generator">å¯†ç ç”Ÿæˆå™¨</div>
            <div class="tab" data-tab="settings">è®¾ç½®</div>
            <div class="tab" data-tab="mapping">ç½‘ç«™æ˜ å°„</div>
        </div>
        
        <div class="main-content">
            <!-- å¯†ç ç”Ÿæˆå™¨æ ‡ç­¾é¡µ -->
            <div class="tab-content active" id="generator-tab">
                <div class="card">
                    <div class="card-title">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M12,15A2,2 0 0,1 14,17A2,2 0 0,1 12,19A2,2 0 0,1 10,17A2,2 0 0,1 12,15M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1Z" />
                        </svg>
                        <span>ç”Ÿæˆæ‚¨çš„å¯†ç </span>
                    </div>
                    
                    <div class="form-group">
                        <label for="master-password">ä¸»å¯†ç </label>
                        <input type="password" id="master-password" placeholder="è¾“å…¥æ‚¨çš„ä¸»å¯†ç " autocomplete="off">
                    </div>
                    
                    <div class="form-group">
                        <label for="website-url">å½“å‰ç½‘ç«™</label>
                        <input type="text" id="website-url" value="https://www.zhihu.com/login" readonly>
                    </div>
                    
                    <div class="form-group">
                        <label for="website-identifier">ç½‘ç«™æ ‡è¯†ç¬¦</label>
                        <div class="flex-group">
                            <input type="text" id="website-identifier" value="zhihu" readonly>
                            <button id="edit-identifier" class="btn btn-secondary">ç¼–è¾‘</button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="username">ç”¨æˆ·å/é‚®ç®±</label>
                        <input type="text" id="username" placeholder="è¾“å…¥æ‚¨çš„ç”¨æˆ·åæˆ–é‚®ç®±">
                    </div>
                    
                    <div class="form-group">
                        <label for="password-length">å¯†ç é•¿åº¦</label>
                        <select id="password-length">
                            <option value="12">12 å­—ç¬¦</option>
                            <option value="14" selected>14 å­—ç¬¦</option>
                            <option value="16">16 å­—ç¬¦</option>
                            <option value="18">18 å­—ç¬¦</option>
                        </select>
                    </div>
                    
                    <button id="generate-btn" class="btn btn-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                        </svg>
                        ç”Ÿæˆå¯†ç 
                    </button>
                    
                    <div id="result-container" style="display: none;">
                        <div class="password-result">
                            <div class="password-display" id="generated-password"></div>
                            <div class="password-actions">
                                <button id="copy-btn" class="btn btn-icon btn-secondary" title="å¤åˆ¶å¯†ç ">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                    </svg>
                                </button>
                                <button id="fill-btn" class="btn btn-icon btn-primary" title="å¡«å……å¯†ç ">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                        <polyline points="7 10 12 15 17 10"></polyline>
                                        <line x1="12" y1="15" x2="12" y2="3"></line>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        
                        <div class="strength-meter">
                            <div class="strength-fill" id="password-strength"></div>
                        </div>
                    </div>
                </div>
                
                <div class="alert alert-success">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                        <polyline points="22 4 12 14.01 9 11.01"></polyline>
                    </svg>
                    <div>æ‰€æœ‰æ“ä½œéƒ½åœ¨æœ¬åœ°æ‰§è¡Œï¼Œæ‚¨çš„å¯†ç ä¸ä¼šç¦»å¼€æµè§ˆå™¨</div>
                </div>
            </div>
            
            <!-- è®¾ç½®æ ‡ç­¾é¡µ -->
            <div class="tab-content" id="settings-tab">
                <div class="card">
                    <div class="card-title">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z" />
                        </svg>
                        <span>è®¾ç½®é€‰é¡¹</span>
                    </div>
                    
                    <div class="form-group">
                        <label for="auto-fill">è‡ªåŠ¨å¡«å……</label>
                        <select id="auto-fill">
                            <option value="auto">è‡ªåŠ¨æ£€æµ‹å¯†ç å­—æ®µ</option>
                            <option value="manual">æ‰‹åŠ¨é€‰æ‹©å¯†ç å­—æ®µ</option>
                            <option value="clipboard">å¤åˆ¶åˆ°å‰ªè´´æ¿</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="password-complexity">å¯†ç å¤æ‚åº¦</label>
                        <select id="password-complexity">
                            <option value="simple">å­—æ¯+æ•°å­—</option>
                            <option value="medium" selected>å­—æ¯+æ•°å­—+åŸºæœ¬ç¬¦å·</option>
                            <option value="high">å­—æ¯+æ•°å­—+æ‰€æœ‰ç¬¦å·</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="session-timeout">ä¼šè¯è¶…æ—¶æ—¶é—´</label>
                        <select id="session-timeout">
                            <option value="5">5 åˆ†é’Ÿ</option>
                            <option value="15">15 åˆ†é’Ÿ</option>
                            <option value="30" selected>30 åˆ†é’Ÿ</option>
                            <option value="60">1 å°æ—¶</option>
                        </select>
                    </div>
                    
                    <button class="btn btn-primary">ä¿å­˜è®¾ç½®</button>
                </div>
                
                <div class="alert alert-warning">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="8" x2="12" y2="12"></line>
                        <line x1="12" y1="16" x2="12.01" y2="16"></line>
                    </svg>
                    <div>è¯·å‹¿åœ¨å…¬å…±è®¡ç®—æœºä¸Šä¿å­˜æ‚¨çš„ä¸»å¯†ç </div>
                </div>
            </div>
            
            <!-- ç½‘ç«™æ˜ å°„æ ‡ç­¾é¡µ -->
            <div class="tab-content" id="mapping-tab">
                <div class="card">
                    <div class="card-title">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M14.06,9L15,9.94L5.92,19H5V18.08L14.06,9M17.66,3C17.41,3 17.15,3.1 16.96,3.29L15.13,5.12L18.88,8.87L20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18.17,3.09 17.92,3 17.66,3M14.06,6.19L3,17.25V21H6.75L17.81,9.94L14.06,6.19Z" />
                        </svg>
                        <span>è‡ªå®šä¹‰ç½‘ç«™æ˜ å°„</span>
                    </div>
                    
                    <div class="form-group">
                        <label>æ·»åŠ æ–°æ˜ å°„</label>
                        <div class="flex-group">
                            <input type="text" id="new-domain" placeholder="ä¾‹å¦‚: zhihu.com">
                            <input type="text" id="new-identifier" placeholder="è‡ªå®šä¹‰æ ‡è¯†ç¬¦">
                            <button id="add-mapping" class="btn btn-secondary">æ·»åŠ </button>
                        </div>
                    </div>
                    
                    <div id="mappings-list">
                        <div class="mapping-item">
                            <div class="mapping-domain">zhihu.com</div>
                            <div class="mapping-identifier">â†’</div>
                            <div class="mapping-identifier">zhihu</div>
                            <button class="btn btn-icon btn-secondary">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="3 6 5 6 21 6"></polyline>
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                </svg>
                            </button>
                        </div>
                        <div class="mapping-item">
                            <div class="mapping-domain">weibo.com</div>
                            <div class="mapping-identifier">â†’</div>
                            <div class="mapping-identifier">weibo</div>
                            <button class="btn btn-icon btn-secondary">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="3 6 5 6 21 6"></polyline>
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                </svg>
                            </button>
                        </div>
                        <div class="mapping-item">
                            <div class="mapping-domain">github.com</div>
                            <div class="mapping-identifier">â†’</div>
                            <div class="mapping-identifier">github</div>
                            <button class="btn btn-icon btn-secondary">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="3 6 5 6 21 6"></polyline>
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="alert alert-warning">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="8" x2="12" y2="12"></line>
                        <line x1="12" y1="16" x2="12.01" y2="16"></line>
                    </svg>
                    <div>è‡ªå®šä¹‰æ˜ å°„ä»…åœ¨æœ¬è®¾å¤‡ä¸Šä¿å­˜ï¼Œä¸ä¼šåŒæ­¥åˆ°å…¶ä»–è®¾å¤‡</div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="instructions">
        <h2>ä½¿ç”¨è¯´æ˜</h2>
        <ol>
            <li>è®¾ç½®ä¸€ä¸ªå¼ºå£®çš„<strong>ä¸»å¯†ç </strong>ï¼ˆè¿™æ˜¯å”¯ä¸€éœ€è¦è®°ä½çš„å¯†ç ï¼‰</li>
            <li>è®¿é—®éœ€è¦ç™»å½•çš„ç½‘ç«™ï¼Œæ’ä»¶ä¼šè‡ªåŠ¨è¯†åˆ«ç½‘ç«™åŸŸå</li>
            <li>è¾“å…¥ç”¨æˆ·å/é‚®ç®±ï¼ˆç”¨äºåŒºåˆ†åŒä¸€ç½‘ç«™çš„å¤šä¸ªè´¦æˆ·ï¼‰</li>
            <li>ç‚¹å‡»<strong>ç”Ÿæˆå¯†ç </strong>æŒ‰é’®åˆ›å»ºå”¯ä¸€å¯†ç </li>
            <li>ä½¿ç”¨<strong>å¤åˆ¶</strong>æˆ–<strong>å¡«å……</strong>åŠŸèƒ½å°†å¯†ç åº”ç”¨åˆ°ç™»å½•è¡¨å•</li>
            <li>åœ¨<strong>ç½‘ç«™æ˜ å°„</strong>ä¸­å¯ä»¥è‡ªå®šä¹‰ç‰¹å®šç½‘ç«™çš„æ ‡è¯†ç¬¦</li>
            <li>ç‚¹å‡»å³ä¸Šè§’<span style="color: #4361ee">â˜€ï¸/ğŸŒ™</span>å›¾æ ‡åˆ‡æ¢æ·±æµ…è‰²æ¨¡å¼</li>
        </ol>
    </div>

    <script>
        // ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = document.getElementById('theme-icon');
        
        // æ£€æŸ¥æœ¬åœ°å­˜å‚¨ä¸­çš„ä¸»é¢˜åå¥½
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'light') {
            document.body.classList.add('light-mode');
            updateThemeIcon(true);
        } else {
            updateThemeIcon(false);
        }
        
        themeToggle.addEventListener('click', () => {
            const isLightMode = document.body.classList.toggle('light-mode');
            localStorage.setItem('theme', isLightMode ? 'light' : 'dark');
            updateThemeIcon(isLightMode);
        });
        
        function updateThemeIcon(isLightMode) {
            if (isLightMode) {
                // æ·±è‰²æ¨¡å¼å›¾æ ‡ï¼ˆæœˆäº®ï¼‰
                themeIcon.innerHTML = `<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>`;
            } else {
                // æµ…è‰²æ¨¡å¼å›¾æ ‡ï¼ˆå¤ªé˜³ï¼‰
                themeIcon.innerHTML = `<circle cx="12" cy="12" r="5"></circle>
                    <line x1="12" y1="1" x2="12" y2="3"></line>
                    <line x1="12" y1="21" x2="12" y2="23"></line>
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                    <line x1="1" y1="12" x2="3" y2="12"></line>
                    <line x1="21" y1="12" x2="23" y2="12"></line>
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>`;
            }
        }
        
        // æ ‡ç­¾é¡µåˆ‡æ¢
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                // ç§»é™¤æ‰€æœ‰æ´»åŠ¨æ ‡ç­¾
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                // æ¿€æ´»å½“å‰æ ‡ç­¾
                tab.classList.add('active');
                const tabId = tab.getAttribute('data-tab');
                document.getElementById(`${tabId}-tab`).classList.add('active');
            });
        });
        
        // ç”Ÿæˆå¯†ç 
        document.getElementById('generate-btn').addEventListener('click', generatePassword);
        
        // å¤åˆ¶å¯†ç 
        document.getElementById('copy-btn').addEventListener('click', copyPassword);
        
        // å¡«å……å¯†ç 
        document.getElementById('fill-btn').addEventListener('click', fillPassword);
        
        // ç¼–è¾‘æ ‡è¯†ç¬¦
        document.getElementById('edit-identifier').addEventListener('click', () => {
            const identifierInput = document.getElementById('website-identifier');
            identifierInput.removeAttribute('readonly');
            identifierInput.focus();
        });
        
        // æ·»åŠ æ˜ å°„
        document.getElementById('add-mapping').addEventListener('click', addMapping);
        
        // ç”Ÿæˆå¯†ç å‡½æ•°
        async function generatePassword() {
            const masterPassword = document.getElementById('master-password').value;
            const identifier = document.getElementById('website-identifier').value;
            const username = document.getElementById('username').value;
            const length = parseInt(document.getElementById('password-length').value);
            
            if (!masterPassword) {
                alert('è¯·è¾“å…¥ä¸»å¯†ç ');
                return;
            }
            
            if (!identifier) {
                alert('è¯·è¾“å…¥ç½‘ç«™æ ‡è¯†ç¬¦');
                return;
            }
            
            // ä½¿ç”¨PBKDF2ç®—æ³•ç”Ÿæˆå¯†ç 
            const salt = `fixed_salt_${identifier}_${username}`;
            const encoder = new TextEncoder();
            const keyMaterial = await window.crypto.subtle.importKey(
                'raw',
                encoder.encode(masterPassword),
                {name: 'PBKDF2'},
                false,
                ['deriveBits']
            );
            
            const derivedBits = await window.crypto.subtle.deriveBits(
                {
                    name: 'PBKDF2',
                    salt: encoder.encode(salt),
                    iterations: 100000,
                    hash: 'SHA-256'
                },
                keyMaterial,
                256 // 256ä½
            );
            
            // è½¬æ¢ä¸ºBase64å­—ç¬¦ä¸²
            const base64 = btoa(String.fromCharCode(...new Uint8Array(derivedBits)))
                .replace(/\+/g, '-')
                .replace(/\//g, '_')
                .replace(/=/g, '');
            
            // å–å‰Nä¸ªå­—ç¬¦ä½œä¸ºå¯†ç 
            let password = base64.substring(0, length);
            
            // ç¡®ä¿å¯†ç åŒ…å«æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦
            password = enhancePassword(password);
            
            // æ˜¾ç¤ºå¯†ç 
            document.getElementById('generated-password').textContent = password;
            document.getElementById('result-container').style.display = 'block';
            
            // æ›´æ–°å¯†ç å¼ºåº¦
            updatePasswordStrength(password);
        }
        
        // å¢å¼ºå¯†ç å¤æ‚åº¦
        function enhancePassword(password) {
            // ç¡®ä¿è‡³å°‘æœ‰ä¸€ä¸ªæ•°å­—
            if (!/\d/.test(password)) {
                password = password.substring(0, password.length - 1) + '1';
            }
            
            // ç¡®ä¿è‡³å°‘æœ‰ä¸€ä¸ªå¤§å†™å­—æ¯
            if (!/[A-Z]/.test(password)) {
                const randomIndex = Math.floor(Math.random() * password.length);
                const char = password.charAt(randomIndex).toUpperCase();
                password = password.substring(0, randomIndex) + char + password.substring(randomIndex + 1);
            }
            
            // ç¡®ä¿è‡³å°‘æœ‰ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦
            if (!/[^A-Za-z0-9]/.test(password)) {
                const specialChars = '!@#$%^&*';
                const randomChar = specialChars[Math.floor(Math.random() * specialChars.length)];
                const randomIndex = Math.floor(Math.random() * password.length);
                password = password.substring(0, randomIndex) + randomChar + password.substring(randomIndex + 1);
            }
            
            return password;
        }
        
        // æ›´æ–°å¯†ç å¼ºåº¦æ˜¾ç¤º
        function updatePasswordStrength(password) {
            let strength = 0;
            
            // é•¿åº¦è¯„åˆ†
            if (password.length >= 12) strength += 25;
            if (password.length >= 16) strength += 10;
            
            // å¤æ‚åº¦è¯„åˆ†
            if (/[a-z]/.test(password)) strength += 10;
            if (/[A-Z]/.test(password)) strength += 15;
            if (/\d/.test(password)) strength += 15;
            if (/[^A-Za-z0-9]/.test(password)) strength += 25;
            
            // é¿å…å¸¸è§å¯†ç æ¨¡å¼
            if (!/(.)\1{2,}/.test(password)) strength += 10;
            
            // é™åˆ¶åœ¨0-100ä¹‹é—´
            strength = Math.min(100, Math.max(0, strength));
            
            const strengthBar = document.getElementById('password-strength');
            strengthBar.style.width = `${strength}%`;
            
            // è®¾ç½®é¢œè‰²
            if (strength < 40) {
                strengthBar.style.backgroundColor = '#e53e3e'; // çº¢è‰²
            } else if (strength < 70) {
                strengthBar.style.backgroundColor = '#dd6b20'; // æ©™è‰²
            } else {
                strengthBar.style.backgroundColor = '#38a169'; // ç»¿è‰²
            }
        }
        
        // å¤åˆ¶å¯†ç åˆ°å‰ªè´´æ¿
        function copyPassword() {
            const password = document.getElementById('generated-password').textContent;
            navigator.clipboard.writeText(password).then(() => {
                alert('å¯†ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
            });
        }
        
        // å¡«å……å¯†ç ï¼ˆæ¨¡æ‹ŸåŠŸèƒ½ï¼‰
        function fillPassword() {
            alert('åœ¨æµè§ˆå™¨æ’ä»¶ä¸­ï¼Œæ­¤åŠŸèƒ½å°†è‡ªåŠ¨å¡«å……åˆ°å½“å‰ç½‘é¡µçš„å¯†ç å­—æ®µ');
        }
        
        // æ·»åŠ æ˜ å°„
        function addMapping() {
            const domain = document.getElementById('new-domain').value;
            const identifier = document.getElementById('new-identifier').value;
            
            if (!domain || !identifier) {
                alert('è¯·è¾“å…¥åŸŸåå’Œæ ‡è¯†ç¬¦');
                return;
            }
            
            const mappingList = document.getElementById('mappings-list');
            const mappingItem = document.createElement('div');
            mappingItem.className = 'mapping-item';
            mappingItem.innerHTML = `
                <div class="mapping-domain">${domain}</div>
                <div class="mapping-identifier">â†’</div>
                <div class="mapping-identifier">${identifier}</div>
                <button class="btn btn-icon btn-secondary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="3 6 5 6 21 6"></polyline>
                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                    </svg>
                </button>
            `;
            
            mappingList.appendChild(mappingItem);
            
            // æ¸…ç©ºè¾“å…¥æ¡†
            document.getElementById('new-domain').value = '';
            document.getElementById('new-identifier').value = '';
            
            alert('æ˜ å°„å·²æ·»åŠ ');
        }
        
        // æ¨¡æ‹Ÿä»å½“å‰URLæå–åŸŸå
        function extractDomainFromUrl(url) {
            try {
                const hostname = new URL(url).hostname;
                // ç§»é™¤wwwå‰ç¼€å’Œé¡¶çº§åŸŸå
                return hostname.replace(/^www\./, '')
                              .split('.')
                              .slice(0, -1)
                              .join('_');
            } catch (e) {
                return 'website';
            }
        }
        
        // PWAå®‰è£…åŠŸèƒ½
        let deferredPrompt;
        const installButton = document.getElementById('install-btn');
        
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            installButton.style.display = 'block';
        });
        
        installButton.addEventListener('click', () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('ç”¨æˆ·å®‰è£…äº†åº”ç”¨');
                    }
                    deferredPrompt = null;
                    installButton.style.display = 'none';
                });
            }
        });
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            // æ¨¡æ‹Ÿå½“å‰ç½‘ç«™URL
            const currentUrl = 'https://www.zhihu.com/login';
            document.getElementById('website-url').value = currentUrl;
            
            // æå–åŸŸå
            const domain = extractDomainFromUrl(currentUrl);
            document.getElementById('website-identifier').value = domain;
            
            // æ£€æŸ¥PWAæ˜¯å¦å·²å®‰è£…
            if (window.matchMedia('(display-mode: standalone)').matches) {
                installButton.style.display = 'none';
            }
        });
    </script>
</body>
</html>